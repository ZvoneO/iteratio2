# Iteratio2 - Resource Planning Application

A comprehensive resource planning application for managing clients, projects, and consultants.

## Local Development

### Prerequisites

- Python 3.12+
- pip
- virtualenv (optional but recommended)

### Setup

1. Clone the repository:
   ```
   git clone <repository-url>
   cd iteratio2
   ```

2. Create and activate a virtual environment:
   ```
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```

3. Install dependencies:
   ```
   pip install -r requirements.txt
   ```

4. Run the application:
   ```
   python run.py
   ```

5. Access the application at http://localhost:5020

## Docker Development

### Prerequisites

- Docker
- Docker Compose

### Setup

1. Build and run the Docker container:
   ```
   ./docker-dev.sh start
   ```

2. Access the application at http://localhost:8080

### Docker Development Script

The `docker-dev.sh` script provides several commands to help with Docker development:

- `./docker-dev.sh start` - Build and start the Docker containers
- `./docker-dev.sh stop` - Stop the Docker containers
- `./docker-dev.sh restart` - Restart the Docker containers
- `./docker-dev.sh logs` - Show logs from the Docker containers
- `./docker-dev.sh shell` - Open a shell in the web container
- `./docker-dev.sh help` - Show help message

## Deployment to Render

This application is configured for easy deployment to Render using the `render.yaml` file.

### Steps to Deploy

1. Push your code to a Git repository (GitHub, GitLab, etc.)

2. Create a new Render account or log in to your existing account

3. Connect your Git repository to Render

4. Click "New" and select "Blueprint"

5. Select your repository and Render will automatically detect the `render.yaml` file

6. Click "Apply" to create the services defined in the blueprint

7. Render will build and deploy your application

### Deployment Script

The `deploy.sh` script helps with deploying to Render:

```
./deploy.sh
```

This script will:
- Check for uncommitted changes
- Push your code to the remote repository
- Deploy to Render using the Render CLI (if installed)

### Environment Variables

The following environment variables are used by the application:

- `SECRET_KEY`: Secret key for Flask sessions (automatically generated by Render)
- `FLASK_ENV`: Environment to run Flask in (set to 'production' by default)
- `DATABASE_URL`: Database connection string (provided by Render PostgreSQL service)

## Project Structure

- `app/`: Main application package
  - `__init__.py`: Application factory
  - `models.py`: Database models
  - `routes/`: Route modules
  - `static/`: Static files (CSS, JS, images)
  - `templates/`: HTML templates
- `config.py`: Configuration settings
- `run.py`: Application entry point
- `Dockerfile`: Docker configuration
- `docker-compose.yml`: Docker Compose configuration
- `render.yaml`: Render deployment configuration
- `deploy.sh`: Deployment script
- `docker-dev.sh`: Docker development script

## Database Migrations

To create and apply database migrations:

```
flask db init    # Only needed once
flask db migrate -m "Migration message"
flask db upgrade
```
